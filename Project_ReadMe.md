# **운동 동작 분석 시스템**   

## **개요**  
이 프로젝트는 **Reference 운동 영상**과 **실시간 사용자의 운동 영상**을 비교하여 **운동 수행 정확도를 분석하는 시스템**입니다.  

### **동작 방식**  
1. **Reference 영상 처리**  
   - Reference 운동 영상을 서버에서 분석하여 **각 관절의 3D 좌표를 JSON 파일로 저장**  
   - 2D Pose Estimation 모델로 **MoveNet** 사용  
   - 3D Pose Lifting 모델로 **VideoPose3D** 사용  

2. **실시간 운동 분석**  
   - 사용자가 웹 앱에서 Reference 영상을 보며 운동 수행  
   - Reference 영상과 3D 좌표 JSON을 호출하여 실시간 비교  
   - 프레임마다 3D 관절 상대 좌표를 비교하여 점수를 계산  

3. **점수 채점 방식 (20프레임마다 평가, 10프레임 슬라이딩 윈도우 적용)**  
   - 점수는 20프레임마다 갱신하며, 최근 10프레임씩 슬라이딩 윈도우 방식으로 저장하여 누적 평가  
   - **Reference 영상과 실시간 사용자의 3D 좌표 차이를 계산**  
   - 계산된 거리 값을 DTW(Dynamic Time Warping) 알고리즘을 이용하여 정렬하여 비교  
   - 3D 좌표의 x, y, z 각각의 DTW를 적용 후 점수를 평균내어 **관절별 유사도 점수 산출**  
   - 최종적으로 모든 관절의 점수를 평균 내어 **100점 기준으로 환산**  

---

## **DTW 적용 이유**  
DTW(Dynamic Time Warping)를 적용하면 Reference 영상과 사용자의 동작이 비동기적으로 수행되더라도 올바르게 비교할 수 있습니다.  
즉, 운동 속도가 다소 차이가 나더라도 유사한 패턴을 감지할 수 있도록 합니다.  

---

## **관절별 유사도 점수 산출**  
각 프레임에서 Reference 3D 좌표와 실시간 3D 좌표 간의 DTW를 적용하여 시간 정렬을 수행한 후,
맨해튼 거리를 사용하여 x, y, z 각각의 절댓값 차이를 구하고 점수를 계산합니다.
이후, 실험적으로 도출된 기준을 바탕으로 Min-Max Scaling을 적용하여 100점 기준으로 환산합니다.



## **기술 스택**  

| 기술 분야        | 사용 기술 |
|----------------|----------|
| **Pose Estimation (2D)**  | MoveNet |
| **3D Pose Lifting**  | VideoPose3D |
| **시간 비동기 처리**  | DTW (Dynamic Time Warping) |
| **운동 점수 채점**  | 3D 좌표 차이 기반 평가, 20프레임마다 갱신, 10프레임 슬라이딩 윈도우 |
| **백엔드 & 배포**  | Docker |
| **데이터 저장**  | JSON |

---
